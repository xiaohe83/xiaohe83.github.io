---
title: 用米家来控制家庭影院，实现“一键”观影
author: xiao he
date: 2023-07-03
category: Jekyll
layout: post
---

### 一句话概述

把幕布，投影，功放和播放盒子通过小爱音箱一齐管控，实现语音控制打开盒子+功放+投影， 放下幕布；语音控制收回幕布，关闭设备。

### 开始之前

TL；DR

每件折腾的死去活来的事情都起源于一个小小的诉求。

家里在装修中就弄了米家的不少东西， 每天定时开关窗帘， 用小爱音响提醒娃做作业什么的，都玩的挺嗨， 但一直没弄家庭影院的接入。一是看的少，二是懒…

但碰上了娃时不时的想看看电影，又觉得电视看时间长了伤眼睛，老人对于家庭影院的那堆遥控器，简直是不可能玩明白的，于是开始折腾。

#### 家庭影院的设备清单

1. 幕布：美视106寸嵌入式；
    
2. 投影：明基TH685；
    
3. 功放：BOSE lifestyle 650
    
4. 盒子：腾讯极光3（这个后来换成了小米盒子，详见下表）
    

#### 家里米家的网关

小米音箱万能遥控二代。因为原来没什么特殊的蓝牙设备，也就没上小米网关。

#### 目标

目标是把家庭影院里面的4个设备接入到米家，然后来进行统一声控。初步研究的时候，发现麻烦不少：

1. 盒子，蓝牙遥控， 小米音箱无法直接控制， 有可能需要增加个米家网关；
    
2. 功放， 使用的也是蓝牙，但频率是2400 - 2483.5MHz, 目前的米家网关无法支持；
    
3. 幕布，也是蓝牙，但是个868MHz的协议，米家网关也不行；
    
4. 投影，就这个是红外，还在小米音箱管控范围内（但后续麻烦事儿也不少）
    

问题的核心在于功放和幕布的支持。

### 功放的接入

鉴于2400MHz这个奇葩的频率， 大淘宝上也没能找到相应的设备能匹配，直接接入米家不指望了， 后来发现lifestyle 650支持CEC，如果盒子上也支持CEC， 把功放配置好， 就可以用盒子的开闭来间接控制功放了。

于是用极光3试了下，结果这个盒子能够支持CEC，但是有bug。在盒子关闭的时候，会发送CEC信号关闭功放，但之后又会发送一个信号唤醒功放… 

正好米家控制盒子的问题也没解决，于是就换了小米盒子4S max来试下。 目前看小米盒子4S MAX和功放的CEC兼容没问题；米家也可以很好的遥控盒子  

### 幕布的接入

这个868MHz的蓝牙遥控不在米家网关的频率范围内。 在大淘宝上搜索找了几条路：

1. iclick万能遥控器 + BESTJOY米桥，iclick来重放幕布的开关键，米桥来模拟小米开关控制iclick，让米家间接通过iclick来控制幕布，但因为支持米桥的iclick要700多，加上米桥快1000了，没钱放弃；
    
2. 找到一家做868MHz转红外的设备，但因为买的人少，没现货，现做需要1个月时间；
    
3. 幕布同步器。太孤陋寡闻了，研究了一圈才知道这玩意。问了下美视的客服，他们也有同步器，我的那款也支持，虽然也不便宜，但果断下单
    

但是！美视这个同步器，说明书就是废纸一张！ 最后是跟技术支持的小伙打着视频对着调通的…  

### 投影的接入

米家里面支持不少投影，也有明基的，但是TH685这个型号，开机是一个键，关机是一个键，关机还要按两下。我匹配了一溜十三招，在米家明基的12款遥控器中也没找到哪个能用。中间还尝试过小米音箱的红外回放功能， 这种方式可以控制，但是声音回放没有办法在“小爱训练”-&gt;“个人训练”的命令组合执行中使用。 比如，我在“个人训练”中定义了“打开明基”，正常对小爱说“打开明基” 是可以打开投影的， 但是当我定义了一个组合命令“进入观影模式”，里面有“打开明基”的时候， 这个“打开明基”是不生效的。

最终的解决办法： 在米家支持的12个明基的遥控器中，分别找到了对应开机和关机的遥控器，加入到米家中。于是在我的米家的设备列表中，分别有”on投影仪”和”off投影仪”…  

### 盒子

换成了小米盒子，接入无障碍

### Finally

最终，用小爱同学来控制小米盒子和明基投影， 小米盒子间接控制功放，投影间接控制幕布，实现了声控“一键”观影
